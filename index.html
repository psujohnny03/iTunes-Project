<!DOCTYPE html>
<html>

<head>
    <meta charset="UTF-8">
    <title>iTunes API Tutorial</title>
    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.1.1/css/bootstrap.min.css" integrity="sha384-WskhaSGFgHYWDcbwN70/dfYBj47jz9qbsMId/iRN3ewGhXQFZCSftd1LZCfmhktB"
        crossorigin="anonymous">
    <link rel="shortcut icon" href="http://findicons.com/files/icons/2770/ios_7_icons/512/music.png">
    <link rel="stylesheet" href="stylesheet.css">
    <style>
        li img {
            width: 100px;
        }
        .amplitude-paused{
            background-image: url("https://assets.teenvogue.com/photos/56beb9c092a7d1d17a7210aa/master/pass/GettyImages-151875329_master.jpg")
        }
        .amplitude-playing{
            background-image: url("https://i.pinimg.com/736x/49/35/b6/4935b6d185bbb0b3aac7259878e4b804--glitter-eyeshadow-makeup-tutorials.jpg")
        }
        .amplitude-play-pause {
            height: 200px;
            width: 200px;
            background-size: cover;
        }
    </style>
</head>

<body>
    <nav class="navbar navbar-light bg-light">
        <form class="form-inline">
            <input class="form-control mr-sm-2" type="search" placeholder="Search" aria-label="Search">
            <button class="btn btn-outline-success my-2 my-sm-0" type="submit">Search</button>
        </form>
    </nav>
    <img src="https://orig00.deviantart.net/0356/f/2012/279/7/a/music__tools_by_mannem-d5gzh4z.png" class="background">
    <h3>
        <a href="https://affiliate.itunes.apple.com/resources/documentation/itunes-store-web-service-search-api/#searchexamples">
            Some Examples
        </a>
    </h3>
    <h3>
        To Do Lists
    </h3>
    <ul>
        <li>CSS frame work</li>
        <li>Search Bar</li>
        <li>Loading image.</li>
        <li>Error Message</li>
        <li>No result found message.</li>
        <li>Make it look pretty:)</li>
    </ul>
    <h3>
        New songs
    </h3>
    <h1><span class="amplitude-play">PLAY</span></h1>
    <ul id="songs">

    </ul>

    <script src="https://code.jquery.com/jquery-3.2.1.min.js" integrity="sha256-hwg4gsxgFZhOsEEamdOYGBf13FyQuiTwlAQgxVSNgt4="
        crossorigin="anonymous"></script>
    <script type="text/javascript" src="https://cdn.jsdelivr.net/npm/amplitudejs@3.2.3/dist/amplitude.js"></script>

    <script>
        // $(document).ready(... This is jQuery function that runs when the page is loaded.
        // Do you want to load when the page is ready or when some button is clicked?
        // Are you waiting for an input from the user???
        $("form").submit(function (event) {
            event.preventDefault()
            var input = $("input").val()
            $.ajax({
                url: "http://itunes.apple.com/search?term=" + input,
                dataType: 'JSONP'
            })
                .done(function (data) {
                    console.log(data);
                    $("#songs").html("")
                    // add code for when response from apple comes back.
                    var ampArr=[];
                    for (var i = 0; i < data.results.length; i++) {
                        if (data.results[i].trackName) {
                            ampArr.push({
                                "name": data.results[i].trackName,
                                "artist": data.results[i].artistName,
                                "album": data.results[i].collectionName,
                                "url": data.results[i].previewUrl,
                                "cover_art_url": data.results[i].artworkUrl100
                            })
                            $('#songs').append(`<li> ${data.results[i].trackName}
                                <div class="amplitude-play-pause" amplitude-song-index="${i}"></div>
                              </li>`);
                        }
                    }
                    console.log(ampArr)
                    Amplitude.init({ "songs": ampArr })
                })
                .fail(function (data) {
                    console.log(data);
                    $('#songs').append(data.status);
                })
        });// End of on ready part


    </script>
</body>

</html>